<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MENÚ CAPIBOBBA - WhatsApp Optimized</title>
    
    <!-- Enlace al archivo CSS externo -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Google Fonts: Preconnect para mejorar la velocidad de descarga -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts: Precarga y estilos para Nunito y Balsamiq Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans:wght@700&family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
</head>
<body>
    <!-- Burbujas de fondo animadas (elementos puramente decorativos) -->
    <div class="bubbles-background" aria-hidden="true">
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
        <span class="bubble"></span>
    </div>

    <!-- Contenedor principal de decoraciones kawaii flotantes (puramente decorativas) -->
    <div class="kawaii-decorations-wrapper" aria-hidden="true">
        <span class="kawaii-decoration bubble-tea-cup">🧋</span>
        <span class="kawaii-decoration capybara-float-1">🦫</span>
        <span class="kawaii-decoration capybara-float-2">🦫</span>
        <span class="kawaii-decoration heart-float">💖</span>
    </div>
    
    <!-- Contenedor principal de todo el contenido del menú -->
    <main class="menu-container">
        <!-- Encabezado principal de la página -->
        <header class="header">
            <div class="capybobba-mascot" role="img" aria-label="Capibobba Logo con un corazón flotante">
                <!-- Imágenes del logo con atributos de rendimiento y accesibilidad -->
                <img id="logoLight" src="https://i.imgur.com/llR0NN0.png" alt="Capibobba Logo Modo Claro" width="250" height="250" loading="eager">
                <img id="logoDark" src="https://i.imgur.com/i7psA3z.png" alt="Capibobba Logo Modo Oscuro" width="250" height="250" loading="eager">
            </div>
            <h1 class="main-title">MENÚ CAPIBOBBA</h1>
            <p class="tagline">¡Dale un abrazo a tu bebida favorita! 🧸💕</p>

            <!-- Resumen del carrito flotante en el header -->
            <div class="cart-summary" id="cartSummary" role="status" aria-live="polite" tabindex="0">
                <span class="cart-icon-emoji" id="cartIconEmoji" aria-hidden="true">🛒</span>
                <span class="cart-item-count" id="cartItemCount">0</span>
                <span class="visually-hidden">elementos en el carrito</span>
            </div>
        </header>
        
        <!-- Contenedor principal del contenido del menú (secciones de productos, promociones, etc.) -->
        <article class="content-wrapper">
            <!-- Divisor decorativo -->
            <div class="kawaii-divider" aria-hidden="true">
                <span class="emoji">🌟</span>
                <span class="emoji">✨</span>
                <span class="emoji">🌟</span>
            </div>
            
            <!-- Sección de Frappés base agua -->
            <section class="menu-section animate-on-scroll" id="water-based-frappes" aria-labelledby="water-frappes-title">
                <header class="section-header">
                    <h2 id="water-frappes-title" class="section-title">🍹✨ Frappés mágicos base agua - 16oz ✨🍹</h2>
                    <div class="price-banner">$75 (Incluye hielo ❄️ y ternura)</div>
                    <p class="section-description">
                        Refrescantes, frutales y muuuy kawaii 💖<br>
                        Ideal para días soleados 🌞
                    </p>
                    <p class="click-legend">da click en los sabores para ver una imagen de la boba</p>
                </header>
                
                <!-- Este div será llenado por JavaScript -->
                <div class="flavor-grid" id="waterFrappesGrid">
                    <!-- Productos de frappés base agua se insertarán aquí dinámicamente -->
                </div>
            </section>
            
            <!-- Divisor decorativo -->
            <div class="kawaii-divider" aria-hidden="true">
                <span class="emoji">🌈</span>
                <span class="emoji">🧋</span>
                <span class="emoji">🌈</span>
            </div>
            
            <!-- Sección de Frappés base leche -->
            <section class="menu-section animate-on-scroll" id="milk-based-frappes" aria-labelledby="milk-frappes-title">
                <header class="section-header">
                    <h2 id="milk-frappes-title" class="section-title">🍼💫 Frappés mágicos base leche - 16oz 💫🍼</h2>
                    <div class="price-banner">$75 (Cremositos, dulces y súper abrazables 🤍)</div>
                    <p class="section-description">¡Una nube cremosa con sabor! 🧋🐰</p>
                    <p class="click-legend">da click en los sabores para ver una imagen de la boba</p>
                </header>
                
                <!-- Este div será llenado por JavaScript -->
                <div class="flavor-grid" id="milkFrappesGrid">
                    <!-- Productos de frappés base leche se insertarán aquí dinámicamente -->
                </div>
            </section>
            
            <!-- Sección de bebidas calientes -->
            <section class="menu-section hot-drinks animate-on-scroll" id="hot-drinks-section" aria-labelledby="hot-drinks-title">
                <header class="section-header">
                    <h2 id="hot-drinks-title" class="section-title">☕🌸 Bebidas Calientitas - 12oz 🌸☕</h2>
                    <div class="price-banner">$60 – Ideal para esos días de frío o lluvia ☔🌧️</div>
                    <p class="section-description">
                        ¡Calientitas, reconfortantes y adorables para abrazar tu día! 💕
                    </p>
                    <p class="click-legend">da click en los sabores para ver una imagen de la bebida</p>
                </header>
                
                <!-- Este div será llenado por JavaScript -->
                <div class="flavor-grid" id="hotDrinksGrid">
                    <!-- Productos de bebidas calientes se insertarán aquí dinámicamente -->
                </div>
            </section>

            <!-- Divisor decorativo para la nueva sección -->
            <div class="kawaii-divider" aria-hidden="true">
                <span class="emoji">💖</span>
                <span class="emoji">✨</span>
                <span class="emoji">🎉</span>
            </div>

            <!-- Sección de Promociones y Novedades -->
            <section class="menu-section promotions-section animate-on-scroll" id="promotions-news-section" aria-labelledby="promotions-title">
                <header class="section-header">
                    <h2 id="promotions-title" class="section-title">🌟 Novedades Kawaii y Promociones Exclusivas 🌟</h2>
                    <p class="section-description">
                        ¡No te pierdas las últimas sorpresas y ofertas más tiernas de Capibobba! ✨
                    </p>
                </header>

                <!-- NUEVA ESPECIALIDAD: CHAMOYADA -->
                <div class="promotion-item animate-on-scroll" id="chamoyadaPromotion" data-name="Chamoyada" data-price="75" tabindex="0">
                    <h3 class="promotion-item-title">🌶️🥭 ¡Nueva! Especialidad: Chamoyada 🥭🌶️</h3>
                    <p class="promotion-item-description">
                        El toque picosito que estabas esperando en el menú, disfruta de una boba explosiva y llena de sabor. Escoge el sabor que quieres llevar al siguiente nivel entre las opciones base agua que tenemos.
                    </p>
                    <button class="add-drink-to-cart-button" aria-label="Añadir Chamoyada al carrito">Añadir 💖</button>
                </div>
                
                <!-- Frappé de Temporada con ID para el evento click (se mantiene para un caso especial) -->
                <div class="promotion-item animate-on-scroll" id="fresasConCremaPromotion" data-name="Frappé Fresas con Crema (Temporada)" data-price="75" tabindex="0">
                    <h3 class="promotion-item-title">🍓🥛 Frappé de Temporada: "Fresas con Crema" 🍓🥛</h3>
                    <p class="promotion-item-description">
                        ¡El clásico favorito de la abuela, pero en versión kawaii! Disfruta de la dulzura de la fresa natural combinada con la cremosidad más suave. ¡Un abrazo de fresas y amor en cada sorbo! Disponible solo por tiempo limitado.💖✨
                    </p>
                    <button class="add-drink-to-cart-button" aria-label="Añadir Frappé Fresas con Crema de Temporada al carrito">Añadir 💖</button>
                </div>

                <div class="promotion-item animate-on-scroll" tabindex="0">
                    <h3 class="promotion-item-title">🎁 Descuento por Primer Pedido 🎁</h3>
                    <p class="promotion-item-description">
                        ¡Bienvenido a la familia Capibobba! Obtén un 10% de descuento en tu primer pedido usando el código: **KAWAII10** al hacer tu encargo por WhatsApp. 🥳
                    </p>
                </div>
            </section>
            
            <!-- Sección de Toppings (ahora solo para visualización, la adición es vía modal) -->
            <section class="menu-section toppings-section animate-on-scroll" id="toppings-section" aria-labelledby="toppings-section-title">
                <header class="section-header">
                    <h2 id="toppings-section-title" class="section-title">🌈🧋 ¡Hazla tuya! Personaliza tu bebida 🧋🌈</h2>
                    <div class="toppings-title">
                        <span style="font-size: 24px; font-weight: 800;">💖 Toppings kawaii</span>
                        <span class="topping-price">+$10 cada uno</span>
                    </div>
                    <p class="section-description">
                        Selecciona estos toppings después de elegir tu bebida. ¡No se pueden añadir solos al carrito!
                    </p>
                </header>
                
                <div class="topping-item animate-on-scroll" tabindex="0">
                    <h3 class="topping-name">💥 Perlas explosivas de frutos rojos</h3>
                    <p class="topping-description">Dulces mini-explosiones de amor ❤️🫧</p>
                </div>
                
                <div class="topping-item animate-on-scroll" tabindex="0">
                    <h3 class="topping-name">🍏 Perlas explosivas de manzana verde</h3>
                    <p class="topping-description">¡Explosión y frescura en cada sorbo! 🍏✨</p>
                </div>
                
                <div class="topping-item animate-on-scroll" tabindex="0">
                    <h3 class="topping-name">🤍 Perlas explosivas de litchi</h3>
                    <p class="topping-description">Delicadas, frutales y muuuy adorables 🍡💖</p>
                </div>
                
                <div class="topping-item animate-on-scroll" tabindex="0">
                    <h3 class="topping-name">🌈 Jelly arcoiris</h3>
                    <p class="topping-description">Suavecitos, coloridos y súper divertidos 🐻🌈</p>
                </div>
            </section>

            <!-- Divisor decorativo -->
            <div class="kawaii-divider" aria-hidden="true">
                <span class="emoji">✨</span>
                <span class="emoji">🛒</span>
                <span class="emoji">✨</span>
            </div>

            <!-- Sección del Carrito de Compras -->
            <section class="menu-section shopping-cart-section animate-on-scroll" id="shoppingCartSection" aria-labelledby="cart-section-title">
                <header class="section-header">
                    <h2 id="cart-section-title" class="section-title">💖 Tu Carrito Kawaii 💖</h2>
                </header>
                <ul id="cartItemsList" class="cart-items-list" aria-live="polite">
                    <!-- Los items del carrito se añadirán dinámicamente aquí -->
                    <li class="empty-cart-message">¡Tu carrito está vacío, añade algo delicioso! 💖</li>
                </ul>
                <div id="cartTotal" class="cart-total">Total: $0</div>

                <div class="cart-actions">
                    <button id="clearCartButton" class="cart-action-button clear-cart" disabled aria-label="Vaciar todos los elementos del carrito">
                        Vaciar Carrito 🗑️
                    </button>
                    <button id="orderWhatsAppButton" class="cart-action-button order-whatsapp-button" disabled aria-label="Enviar pedido por WhatsApp">
                        Pedir por WhatsApp 📱
                    </button>
                </div>
            </section>
            
            <!-- Sección de cómo ordenar -->
            <section class="order-section animate-on-scroll" id="order-process-section" aria-labelledby="order-title">
                <div class="order-content">
                    <h2 id="order-title" class="order-title">✨🧸 CÓMO ORDENAR TU BEBIDA KAWAII 🧸✨</h2>
                    
                    <div class="order-steps">
                        <p class="order-step">1. Elige tu bebida (frappé o caliente) y agrégala al carrito.</p>
                        <p class="order-step">2. Si deseas, selecciona toppings para esa bebida en la ventana emergente.</p>
                        <p class="order-step">3. Repite para cada bebida que quieras.</p>
                        <p class="order-step">
                            4. Cuando estés listo, haz clic en "Pedir por WhatsApp" para enviar tu orden automáticamente.
                        </p>
                        <p class="order-step">
                            5. Recibe tu bebida y toma muchas fotos! Y etiqueta a <a href="https://www.facebook.com/share/195krrAWVG/" target="_blank" rel="noopener noreferrer" style="color: inherit; text-decoration: underline;">@Capibobba</a>, mándanos tu post y gana un <strong>$10 de descuento</strong> en tu siguiente pedido. 📸💕
                        </p>
                    </div>

                    <!-- Sección de WhatsApp con número de contacto -->
                    <div class="whatsapp-section">
                        <p class="whatsapp-text">Nuestro número de contacto:</p>
                        <a href="https://wa.me/5217711831526" target="_blank" rel="noopener noreferrer" class="whatsapp-link">
                            <div class="whatsapp-number" role="button" tabindex="0" aria-label="Número de WhatsApp 771 279 4633">
                                7711831526
                                <span class="whatsapp-click-legend">¡También puedes pedir dando click en "Pedir por WhatsApp" arriba!</span>
                            </div>
                        </a>
                    </div>
                </div>
            </section>
            
            <!-- Mensaje final -->
            <div class="final-message animate-on-scroll">
                <div>
                    > Todos nuestros frappés son servidos con mucho cariño y los llevamos a la puerta de tu hogar velozmente 💕<br>
                    El diseño de tu bebida siempre será adorable! 🐾
                </div>
                <div class="highlight">
                    ¿Listo para tomar algo tiernamente delicioso? 🧋✨<br>
                    ¡Te esperamos con una sonrisa y un vaso lleno de felicidad! 💖🌟
                </div>
            </div>
        </article>
    </main>

    <!-- Visor de Imágenes de Sabor (Overlay) - Modal -->
    <div id="flavorImageOverlay" class="flavor-image-overlay" role="dialog" aria-modal="true" aria-labelledby="flavorImageName">
        <div class="flavor-image-content">
            <img id="flavorImage" src="" alt="Imagen del sabor" width="300" height="300" loading="lazy">
            <h3 class="flavor-image-name" id="flavorImageName"></h3>
            <button class="close-modal-button" aria-label="Cerrar imagen del sabor">✖</button>
        </div>
    </div>

    <!-- Modal de Selección de Toppings -->
    <div id="toppingSelectionOverlay" class="topping-selection-overlay" role="dialog" aria-modal="true" aria-labelledby="topping-modal-title">
        <div class="topping-selection-content">
            <header class="section-header">
                <h2 id="topping-modal-title" class="section-title">¡Personaliza tu <span id="toppingDrinkName" class="current-drink-name-modal"></span>!</h2>
                <p>Selecciona los toppings que deseas añadir a esta bebida:</p>
            </header>
            <div id="toppingsModalGrid" class="toppings-modal-grid">
                <!-- Los toppings se cargarán dinámicamente aquí por JS -->
            </div>
            <div class="topping-selection-actions">
                <button id="confirmToppingsButton" aria-label="Confirmar selección de toppings">Confirmar Selección ✅</button>
                <button id="noToppingsButton" aria-label="No añadir toppings">Sin Toppings 🚫</button>
                <button id="cancelToppingsButton" aria-label="Cancelar selección de toppings">Cancelar ❌</button>
            </div>
            <button class="close-modal-button" aria-label="Cerrar selección de toppings">✖</button>
        </div>
    </div>

    <!-- NUEVO: Modal de Personalización de Chamoyada -->
    <div id="chamoyadaCustomizationOverlay" class="flavor-image-overlay" role="dialog" aria-modal="true" aria-labelledby="chamoyada-modal-title">
        <div class="flavor-image-content">
            <header class="section-header">
                <h2 id="chamoyada-modal-title" class="section-title">¡Personaliza tu Chamoyada!</h2>
                <p class="section-description">Elige tu sabor base y añade toppings.</p>
            </header>

            <div class="chamoyada-flavor-selection">
                <h3 class="flavor-selection-title">Escoge tu sabor base (Base Agua)</h3>
                <div id="chamoyadaBaseFlavorGrid" class="flavor-grid-small">
                    <!-- Los sabores base agua se cargarán aquí dinámicamente por JS -->
                </div>
            </div>

            <div class="chamoyada-topping-selection">
                <h3 class="topping-selection-title">Añade Toppings (Opcional)</h3>
                <div id="chamoyadaToppingsGrid" class="toppings-modal-grid">
                    <!-- Los toppings existentes se cargarán aquí dinámicamente por JS -->
                </div>
            </div>

            <div class="topping-selection-actions">
                <button id="confirmChamoyadaButton" aria-label="Confirmar Chamoyada">Confirmar Chamoyada ✅</button>
                <button id="cancelChamoyadaButton" aria-label="Cancelar Chamoyada">Cancelar ❌</button>
            </div>
            <button class="close-modal-button" aria-label="Cerrar personalización de Chamoyada">✖</button>
        </div>
    </div>
    <!-- FIN NUEVO: Modal de Personalización de Chamoyada -->

    <!-- Enlace al archivo JavaScript externo con defer para no bloquear el renderizado -->
    <script src="script.js" defer></script>
</body>
</html>
